"use strict";function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),DataHelper=function(){function a(b){_classCallCheck(this,a),this._data=b}return _createClass(a,[{key:"data",value:function(){for(var a=[],b=0;b<5;b++)a.push({low:this._toCelsius(this._data.item.forecast[b].low),high:this._toCelsius(this._data.item.forecast[b].high),day:this._weekDay(this._data.item.forecast[b].day),text:this._codeCondition(this._data.item.forecast[b].code)});return a[0].now=this._toCelsius(this._data.item.condition.temp),a[0].text=this._codeCondition(this._data.item.condition.code),a[0].sensation=parseInt((a[0].low+a[0].high)/2),{status:this._data.status,location:{name:this._data.location.city,region:this._data.location.region,country:this._traduction(this._data.location.country)},wind:this._toKmh(this._data.wind.speed),humidity:this._data.atmosphere.humidity,forecast:a}}},{key:"_toCelsius",value:function(a){return parseInt((a-32)/1.8)}},{key:"_toKmh",value:function(a){return parseInt(1.609344*a)}},{key:"_codeCondition",value:function(a){var b={0:"Tornado",1:"Tempestade",2:"Furacão",3:"Trovoada",4:"Trovoada",5:"Chuva e Neve",6:"Chuva",7:"Chuva e Neve",8:"Chuva",9:"Chuva",10:"Chuva",11:"Chuva",12:"Chuva",13:"Neve",14:"Neve",15:"Neve",16:"Neve",17:"Granizo",18:"Chuva",19:"Poeira",20:"Nevoento",21:"Neblina",22:"Enfumaçado",23:"Tempestuoso",24:"Ventoso",25:"Frio",26:"Nublado",27:"Nublado",28:"Nublado",29:"Nublado",30:"Nublado",31:"Limpo",32:"Ensolarado",33:"Bom",34:"Bom",35:"Chuva e Granizo",36:"Quente",37:"Trovoada",38:"Trovoada",39:"Trovoada",40:"Chuva",41:"Neve",42:"Neve",43:"Neve",44:"Nublado",45:"Trovoada",46:"Neve",47:"Trovoada",3200:"Não avaliado"};return b[a]}},{key:"_weekDay",value:function(a){var b={mon:"Segunda",tue:"Terça",wed:"Quarta",thu:"Quinta",fri:"Sexta",sat:"Sábado",sun:"Domingo"};return b[a.toLowerCase()]}},{key:"_traduction",value:function(a){var b={brazil:"Brasil"};return b[a.toLowerCase()]||a}}]),a}(),WeatherService=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"find",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!d&&e>=3?b({status:404,message:"Não encontrado"}):void axios.get(this._url(a)).then(function(f){try{var g=f.data.query.results.channel;g.status=200,b(null,g)}catch(f){c.find(a,b,d,e+1)}}).catch(function(a){b({status:a.status||500,message:"Erro inesperado"})})}},{key:"_url",value:function(a){var b='select woeid from geo.places(1) where text="'+a+'"',c="select * from weather.forecast where woeid in ("+b+")";return"https://query.yahooapis.com/v1/public/yql?q="+c+"&format=json"}}]),a}(),View=function(){function a(b){_classCallCheck(this,a),this._element=b}return _createClass(a,[{key:"template",value:function(){throw new Error("O método template precisa ser implementado")}},{key:"update",value:function(a){this._element.innerHTML=this.template(a)}}]),a}(),CapitalsView=function(a){function b(a){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return _inherits(b,a),_createClass(b,[{key:"template",value:function(a){if(a.status>200)return'\n\t\t\t\t<div style="text-align: center; font-size: 1.5em; margin-top: 30px; color: red">\n\t\t\t\t\t<h5>'+a.status+" - "+a.message+"</5>\n\t\t\t\t</div>\n\t\t\t";for(var b="",c=0;c<a.length;c++)b+='\n\t\t\t\t<tr class="capital__btn" onclick="weatherController.loadCard(event, '+c+')">\n\t\t\t\t\t<td>'+a[c].forecast[0].low+"°</td>\n\t\t\t\t\t<td>"+a[c].forecast[0].high+"°</td>\n\t\t\t\t\t<td>"+a[c].location.name+"</td>\n\t\t\t\t</tr>\n\t\t\t";var d='\n\t\t\t<table class="capitals__table">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Min</th>\n\t\t\t\t\t\t<th>Máx</th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t'+b+"\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t";return a.length>6&&(d+=d),d}}]),b}(View),CardView=function(a){function b(a){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return _inherits(b,a),_createClass(b,[{key:"template",value:function(a){return a.status>200?'\n\t\t\t\t<div class="card">\n\n\t\t\t\t\t<button class="btn card__btn--into-right" type="button" onclick="weatherController.closeCard()">\n\t\t\t\t\t\t<div class="icon icon--close">close</div>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<div class="card__details">\n\t\t\t\t\t\t<h5>'+a.status+'</h5>\n\n\t\t\t\t\t\t<div class="card__details--now">\n\t\t\t\t\t\t\t<p>'+a.message+"</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t":'\n\t\t\t<div class="card">\n\n\t\t\t\t<button class="btn card__btn--into-right" type="button" onclick="weatherController.closeCard()">\n\t\t\t\t\t<div class="icon icon--close">close</div>\n\t\t\t\t</button>\n\n\t\t\t\t<div class="card__details">\n\t\t\t\t\t<h5>'+a.location.name+", "+a.location.region+" - "+a.location.country+'</h5>\n\n\t\t\t\t\t<div class="card__details--now">\n\t\t\t\t\t\t<p>'+a.forecast[0].now+"°C "+a.forecast[0].text+'</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="col--40">\n\t\t\t\t\t\t<ul class="list--inline">\n\t\t\t\t\t\t\t<li class="icon icon--arrow-down">down</li>\n\t\t\t\t\t\t\t<li style="margin-right: 1ch;">'+a.forecast[0].low+'°</li>\n\t\t\t\t\t\t\t<li class="icon icon--arrow-up">up</li>\n\t\t\t\t\t\t\t<li>'+a.forecast[0].high+'°</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="col--60">\n\t\t\t\t\t\t<p><span>Sensação</span> '+a.forecast[0].sensation+'°</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="col--40">\n\t\t\t\t\t\t<p><span>Vento</span> '+a.wind+'km/h</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="col--60">\n\t\t\t\t\t\t<p><span>Humidade</span> '+a.humidity+'%</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="card__days">\n\t\t\t\t\t<div class="col--25">\n\t\t\t\t\t\t<p>'+a.forecast[1].day+'</p>\n\t\t\t\t\t\t<p class="card__days--forecast">\n\t\t\t\t\t\t\t'+a.forecast[1].low+"° "+a.forecast[1].high+'°\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="col--25">\n\t\t\t\t\t\t<p>'+a.forecast[2].day+'</p>\n\t\t\t\t\t\t<p class="card__days--forecast">\n\t\t\t\t\t\t\t'+a.forecast[2].low+"° "+a.forecast[2].high+'°\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="col--25">\n\t\t\t\t\t\t<p>'+a.forecast[3].day+'</p>\n\t\t\t\t\t\t<p class="card__days--forecast">\n\t\t\t\t\t\t\t'+a.forecast[3].low+"° "+a.forecast[3].high+'°\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="col--25">\n\t\t\t\t\t\t<p>'+a.forecast[4].day+'</p>\n\t\t\t\t\t\t<p class="card__days--forecast">\n\t\t\t\t\t\t\t'+a.forecast[4].low+"° "+a.forecast[4].high+"°\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t</div>\n\t\t"}}]),b}(View),$=document.querySelector.bind(document),WeatherController=function(){function a(){_classCallCheck(this,a),this._capitalsData=[],this._weatherService=new WeatherService,this._form=$(".form"),this._loaderTraces=$(".loader--traces"),this._loaderCircle=$(".loader--circle"),this._inputSearch=$(".form__input"),this._headerTitle=$(".header__title"),this._cardView=new CardView($("#card__view")),this._capitalsView=new CapitalsView($("#capitals__view")),this._loadCapitals()}return _createClass(a,[{key:"closeCard",value:function(){$(".card").style.display="none",this._changeAroundCard("header__title--sm","header__title--lg","50px")}},{key:"loadCard",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;a.preventDefault(),c>-1?(this._cardView.update(this._capitalsData[c]),this._changeAroundCard("header__title--lg","header__title--sm","20px")):(this._loaderTraces.style.display="block",this._weatherService.find(this._inputSearch.value,function(a,c){return b._loaderTraces.style.display="none",b._changeAroundCard("header__title--lg","header__title--sm","20px"),a?b._cardView.update(a):void b._cardView.update(new DataHelper(c).data())}))}},{key:"_changeAroundCard",value:function(a,b,c){this._headerTitle.classList.contains(a)&&this._headerTitle.classList.remove(a),this._headerTitle.classList.contains(b)||this._headerTitle.classList.add(b),this._form.style.marginBottom=c,this._inputSearch.value=""}},{key:"_loadCapitals",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=["Porto Alegre","Rio de Janeiro","Sao Paulo","Belo Horizonte","Brasilia","Belem","Salvador","Curitiba","Fortaleza","Manaus","Joao Pessoa"];return c.length==this._capitalsData.length?this._loaderCircle.style.display="none":void this._weatherService.find(c[b],function(c,d){return c?a._capitalsView.update(c):(a._capitalsData.push(new DataHelper(d).data()),a._capitalsView.update(a._capitalsData),void a._loadCapitals(b+1))},!0)}}]),a}(),weatherController=new WeatherController;
//# sourceMappingURL=app.min.js.map